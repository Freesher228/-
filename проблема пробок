from PyQt6.QtWidgets import QApplication, QMainWindow, QPushButton, QGridLayout, QWidget, QHBoxLayout, QVBoxLayout, QLabel


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.setWindowTitle("QHBoxLayout and QGridLayout Example")

        self.max_places = 50
        self.places = self.max_places

        # -----–°–æ–∑–¥–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –ª–µ–π–∞—É—Ç---------#
        main_layout = QVBoxLayout()

        # -----–°–æ–∑–¥–∞—Ç—å QGridLayout---------#
        places_layout = QGridLayout()

        # -----–°–æ–∑–¥–∞—Ç—å QHBoxLayout---------#
        control_layout = QHBoxLayout()
        self.parking_places = QLabel(" ")

        # ----–°–æ–∑–¥–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –≤–∏–¥–∂–µ—Ç—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è------#
        button_places = []
        for a in range(50):
            button4 = QPushButton("üöô")
            button_places.append(button4)
        for b in range(50):
            button_places[b].clicked.connect(self.occupied_car)
        for b in range(0, 50, 4):
            control_layout.addWidget(button_places[b])
            places_layout.addWidget(button_places[b], int(b//4), b+1, b+2, b+3, b+4)

        # ----- –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–∂–µ—Ç—ã –≤ QGridLayout ---------#
        places_layout.addWidget(self.parking_places, 0, 1)

        # ----- –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–∂–µ—Ç—ã –≤ QHBoxLayout ---------#

        # ----- –î–æ–±–∞–≤–∏—Ç—å –ª–µ–π–∞—É—Ç—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–µ–π–∞—É—Ç ---------#
        main_layout.addLayout(control_layout)
        main_layout.addLayout(places_layout)

        # ----- –î–æ–±–∞–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –ª–µ–π–∞—É—Ç –≤ –æ–∫–Ω–æ ---------#
        container = QWidget()
        container.setLayout(main_layout)
        self.setCentralWidget(container)

    def get_places(self):
        self.parking_places.setText(str(self.places))

    def occupied_car(self):
        obj = self.sender()
        if obj.text() == "üöô":
            obj.setText("X")
        elif obj.text() == "X":
            obj.setText("üöô")



    def away_car(self):
        if self.places < self.max_places:
            self.places += 1
        self.get_places()

app = QApplication([])
window = MainWindow()
window.show()
app.exec()
